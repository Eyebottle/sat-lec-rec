# ì‚¬ìš©ì„± ê°œì„  êµ¬í˜„ ê³„íšì„œ

**ì‘ì„±ì¼**: 2025-01-09
**ëŒ€ìƒ ê¸°ëŠ¥**: 2ë²ˆ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤, 3ë²ˆ ì˜ˆì•½ í…œí”Œë¦¿, 5ë²ˆ ë…¹í™” íˆìŠ¤í† ë¦¬
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: ì´ 12-16ì‹œê°„ (3-4ì¼)

---

## ğŸ“‹ ëª©ì°¨

1. [ì „ì²´ ê°œìš”](#1-ì „ì²´-ê°œìš”)
2. [ê¸°ëŠ¥ 2: í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì‹œìŠ¤í…œ](#2-ê¸°ëŠ¥-2-í‚¤ë³´ë“œ-ë‹¨ì¶•í‚¤-ì‹œìŠ¤í…œ)
3. [ê¸°ëŠ¥ 3: ì˜ˆì•½ í…œí”Œë¦¿ ì‹œìŠ¤í…œ](#3-ê¸°ëŠ¥-3-ì˜ˆì•½-í…œí”Œë¦¿-ì‹œìŠ¤í…œ)
4. [ê¸°ëŠ¥ 5: ë…¹í™” íˆìŠ¤í† ë¦¬ ëŒ€ì‹œë³´ë“œ](#4-ê¸°ëŠ¥-5-ë…¹í™”-íˆìŠ¤í† ë¦¬-ëŒ€ì‹œë³´ë“œ)
5. [í†µí•© ê³„íš](#5-í†µí•©-ê³„íš)
6. [í…ŒìŠ¤íŠ¸ ê³„íš](#6-í…ŒìŠ¤íŠ¸-ê³„íš)
7. [ë¦¬ìŠ¤í¬ ê´€ë¦¬](#7-ë¦¬ìŠ¤í¬-ê´€ë¦¬)

---

## 1. ì „ì²´ ê°œìš”

### 1.1 ëª©í‘œ

ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ì—¬ ë‹¤ìŒ ëª©í‘œë¥¼ ë‹¬ì„±:
- **íš¨ìœ¨ì„±**: ì˜ˆì•½ ì…ë ¥ ì‹œê°„ 80% ë‹¨ì¶• (í…œí”Œë¦¿)
- **ì ‘ê·¼ì„±**: ë§ˆìš°ìŠ¤ ì—†ì´ ì£¼ìš” ê¸°ëŠ¥ ì œì–´ (ë‹¨ì¶•í‚¤)
- **íˆ¬ëª…ì„±**: ê³¼ê±° ë…¹í™” ê¸°ë¡ ë° ì„±ê³µë¥  ì¶”ì  (íˆìŠ¤í† ë¦¬)

### 1.2 ìš°ì„ ìˆœìœ„

| ìˆœìœ„ | ê¸°ëŠ¥ | ë‚œì´ë„ | ì†Œìš” ì‹œê°„ | ì˜ì¡´ì„± |
|------|------|--------|-----------|--------|
| 1 | í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ | â­â­ | 3-4ì‹œê°„ | ì—†ìŒ |
| 2 | ì˜ˆì•½ í…œí”Œë¦¿ | â­â­â­ | 4-5ì‹œê°„ | ì—†ìŒ |
| 3 | ë…¹í™” íˆìŠ¤í† ë¦¬ | â­â­â­â­ | 5-7ì‹œê°„ | ë©”íƒ€ JSON íŒŒì¼ |

### 1.3 êµ¬í˜„ ìˆœì„œ

```
Day 1: í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (3-4h)
Day 2: ì˜ˆì•½ í…œí”Œë¦¿ (4-5h)
Day 3-4: ë…¹í™” íˆìŠ¤í† ë¦¬ (5-7h)
```

---

## 2. ê¸°ëŠ¥ 2: í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì‹œìŠ¤í…œ

### 2.1 ëª©í‘œ ë° ë²”ìœ„

**ëª©í‘œ:**
- ìì£¼ ì‚¬ìš©í•˜ëŠ” 5ê°€ì§€ ì‘ì—…ì— ë‹¨ì¶•í‚¤ ì œê³µ
- ì „ì—­ ë‹¨ì¶•í‚¤ (ì•±ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œë„ ì‘ë™)
- UIì— ë‹¨ì¶•í‚¤ íŒíŠ¸ í‘œì‹œ (ë°œê²¬ ê°€ëŠ¥ì„±)

**ë²”ìœ„ IN:**
- `Ctrl + R`: ë…¹í™” ì‹œì‘/ì¤‘ì§€ (ì „ì—­)
- `Ctrl + T`: 10ì´ˆ í…ŒìŠ¤íŠ¸ ë…¹í™” (ë©”ì¸ í™”ë©´)
- `Ctrl + S`: ì˜ˆì•½ ì €ì¥ (ì˜ˆì•½ ì…ë ¥ í™”ë©´)
- `Ctrl + ,`: ì„¤ì • í™”ë©´ ì—´ê¸° (ì „ì—­)
- `Esc`: ë…¹í™” ì¤‘ì§€ í™•ì¸ (ë…¹í™” ì¤‘)

**ë²”ìœ„ OUT (v1.0):**
- ë‹¨ì¶•í‚¤ ì»¤ìŠ¤í„°ë§ˆì´ì§• (ì„¤ì •ì—ì„œ ë³€ê²½)
- ë‹¨ì¶•í‚¤ ì¶©ëŒ ê°ì§€
- ë‹¨ì¶•í‚¤ ë„ì›€ë§ ì˜¤ë²„ë ˆì´

### 2.2 ê¸°ìˆ  ìŠ¤íƒ

**íŒ¨í‚¤ì§€:**
```yaml
dependencies:
  hotkey_manager: ^0.2.3
```

**í•µì‹¬ í´ë˜ìŠ¤:**
- `HotKeyManager`: ì „ì—­ ì‹±ê¸€í†¤
- `HotKey`: ë‹¨ì¶•í‚¤ ì •ì˜
- `HotKeyScope`: system (ì „ì—­) / inapp (ì•± ë‚´ë¶€)

### 2.3 íŒŒì¼ êµ¬ì¡°

```
lib/
â”œâ”€â”€ services/
â”‚   â””â”€â”€ hotkey_service.dart          (NEW - 296 lines)
â”œâ”€â”€ models/
â”‚   â””â”€â”€ app_settings.dart            (MODIFY - +15 lines)
â””â”€â”€ ui/
    â”œâ”€â”€ screens/
    â”‚   â”œâ”€â”€ main_screen.dart         (MODIFY - +20 lines)
    â”‚   â””â”€â”€ settings_screen.dart     (MODIFY - +10 lines)
    â””â”€â”€ widgets/
        â””â”€â”€ common/
            â””â”€â”€ app_button.dart      (MODIFY - +25 lines)
```

### 2.4 ìƒì„¸ êµ¬í˜„ ê³„íš

#### 2.4.1 Phase 1: HotkeyService ìƒì„± (90ë¶„)

**lib/services/hotkey_service.dart**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ë¥¼ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤
//
// ì „ì—­ ë‹¨ì¶•í‚¤(Ctrl+R, Ctrl+,)ì™€ ì•± ë‚´ë¶€ ë‹¨ì¶•í‚¤(Ctrl+T, Ctrl+S)ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
// ë‹¨ì¶•í‚¤ ì½œë°±ì„ ë°›ì•„ ì ì ˆí•œ ì•¡ì…˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
//
// ì…ë ¥: ì—†ìŒ (ì‹±ê¸€í†¤ íŒ¨í„´)
// ì¶œë ¥: ë‹¨ì¶•í‚¤ ì´ë²¤íŠ¸ ì½œë°±
// ì˜ˆì™¸: ë‹¨ì¶•í‚¤ ë“±ë¡ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ê¸°ë¡

import 'package:hotkey_manager/hotkey_manager.dart';
import 'package:flutter/services.dart';
import '../utils/logger_service.dart';

/// í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ê´€ë¦¬ ì„œë¹„ìŠ¤
///
/// ì „ì—­ ë‹¨ì¶•í‚¤(system scope)ì™€ ì•± ë‚´ë¶€ ë‹¨ì¶•í‚¤(inapp scope)ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
/// ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ì•± ì „ì²´ì—ì„œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
///
/// ì‚¬ìš© ì˜ˆì‹œ:
/// ```dart
/// await HotkeyService.instance.initialize();
/// HotkeyService.instance.setOnRecordToggle(() {
///   print('ë…¹í™” ì‹œì‘/ì¤‘ì§€');
/// });
/// ```
class HotkeyService {
  static final HotkeyService _instance = HotkeyService._internal();
  static HotkeyService get instance => _instance;

  final Logger _logger = LoggerService.instance.logger;

  // ì½œë°± í•¨ìˆ˜ë“¤
  VoidCallback? _onRecordToggle;      // Ctrl+R
  VoidCallback? _onQuickTest;         // Ctrl+T
  VoidCallback? _onSaveSchedule;      // Ctrl+S
  VoidCallback? _onOpenSettings;      // Ctrl+,
  VoidCallback? _onStopRecording;     // Esc

  // ë“±ë¡ëœ ë‹¨ì¶•í‚¤ ëª©ë¡
  final List<HotKey> _registeredHotkeys = [];

  bool _isInitialized = false;

  HotkeyService._internal();

  /// ì´ˆê¸°í™” ë° ë‹¨ì¶•í‚¤ ë“±ë¡
  ///
  /// ì•± ì‹œì‘ ì‹œ main.dartì—ì„œ í˜¸ì¶œí•©ë‹ˆë‹¤.
  /// ê¸°ì¡´ì— ë“±ë¡ëœ ë‹¨ì¶•í‚¤ê°€ ìˆìœ¼ë©´ ëª¨ë‘ í•´ì œ í›„ ì¬ë“±ë¡í•©ë‹ˆë‹¤.
  Future<void> initialize() async {
    if (_isInitialized) {
      _logger.w('âš ï¸ HotkeyService already initialized');
      return;
    }

    try {
      // ê¸°ì¡´ ë‹¨ì¶•í‚¤ ëª¨ë‘ í•´ì œ
      await hotKeyManager.unregisterAll();
      _logger.i('ğŸ”§ Unregistered all previous hotkeys');

      // ë‹¨ì¶•í‚¤ ë“±ë¡
      await _registerAllHotkeys();

      _isInitialized = true;
      _logger.i('âœ… HotkeyService initialized');
    } catch (e, stackTrace) {
      _logger.e('âŒ Failed to initialize HotkeyService', error: e, stackTrace: stackTrace);
    }
  }

  /// ëª¨ë“  ë‹¨ì¶•í‚¤ ë“±ë¡
  Future<void> _registerAllHotkeys() async {
    // 1. Ctrl+R: ë…¹í™” ì‹œì‘/ì¤‘ì§€ (ì „ì—­)
    await _registerHotkey(
      key: PhysicalKeyboardKey.keyR,
      modifiers: [HotKeyModifier.control],
      scope: HotKeyScope.system,
      name: 'Record Toggle',
      onPressed: () => _onRecordToggle?.call(),
    );

    // 2. Ctrl+T: 10ì´ˆ í…ŒìŠ¤íŠ¸ (ì•± ë‚´ë¶€)
    await _registerHotkey(
      key: PhysicalKeyboardKey.keyT,
      modifiers: [HotKeyModifier.control],
      scope: HotKeyScope.inapp,
      name: 'Quick Test',
      onPressed: () => _onQuickTest?.call(),
    );

    // 3. Ctrl+S: ì˜ˆì•½ ì €ì¥ (ì•± ë‚´ë¶€)
    await _registerHotkey(
      key: PhysicalKeyboardKey.keyS,
      modifiers: [HotKeyModifier.control],
      scope: HotKeyScope.inapp,
      name: 'Save Schedule',
      onPressed: () => _onSaveSchedule?.call(),
    );

    // 4. Ctrl+Comma: ì„¤ì • ì—´ê¸° (ì „ì—­)
    await _registerHotkey(
      key: PhysicalKeyboardKey.comma,
      modifiers: [HotKeyModifier.control],
      scope: HotKeyScope.system,
      name: 'Open Settings',
      onPressed: () => _onOpenSettings?.call(),
    );

    // 5. Esc: ë…¹í™” ì¤‘ì§€ (ì•± ë‚´ë¶€, ë…¹í™” ì¤‘ì—ë§Œ í™œì„±í™”)
    await _registerHotkey(
      key: PhysicalKeyboardKey.escape,
      modifiers: [],
      scope: HotKeyScope.inapp,
      name: 'Stop Recording',
      onPressed: () => _onStopRecording?.call(),
    );
  }

  /// ê°œë³„ ë‹¨ì¶•í‚¤ ë“±ë¡
  Future<void> _registerHotkey({
    required PhysicalKeyboardKey key,
    required List<HotKeyModifier> modifiers,
    required HotKeyScope scope,
    required String name,
    required VoidCallback onPressed,
  }) async {
    try {
      final hotKey = HotKey(
        key: key,
        modifiers: modifiers,
        scope: scope,
      );

      await hotKeyManager.register(
        hotKey,
        keyDownHandler: (hotKey) {
          _logger.d('ğŸ¹ Hotkey pressed: $name');
          onPressed();
        },
      );

      _registeredHotkeys.add(hotKey);
      _logger.i('âœ… Registered hotkey: $name (${scope.name})');
    } catch (e) {
      _logger.e('âŒ Failed to register hotkey: $name', error: e);
    }
  }

  // === ì½œë°± ì„¤ì • ë©”ì„œë“œë“¤ ===

  void setOnRecordToggle(VoidCallback callback) {
    _onRecordToggle = callback;
  }

  void setOnQuickTest(VoidCallback callback) {
    _onQuickTest = callback;
  }

  void setOnSaveSchedule(VoidCallback callback) {
    _onSaveSchedule = callback;
  }

  void setOnOpenSettings(VoidCallback callback) {
    _onOpenSettings = callback;
  }

  void setOnStopRecording(VoidCallback callback) {
    _onStopRecording = callback;
  }

  /// ë‹¨ì¶•í‚¤ íŒíŠ¸ í…ìŠ¤íŠ¸ ë°˜í™˜
  ///
  /// UIì— í‘œì‹œí•  ë‹¨ì¶•í‚¤ íŒíŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  /// ì˜ˆ: "Ctrl+R", "Ctrl+T"
  static String getHintText(String action) {
    switch (action) {
      case 'record':
        return 'Ctrl+R';
      case 'test':
        return 'Ctrl+T';
      case 'save':
        return 'Ctrl+S';
      case 'settings':
        return 'Ctrl+,';
      case 'stop':
        return 'Esc';
      default:
        return '';
    }
  }

  /// ì •ë¦¬ ë° í•´ì œ
  Future<void> dispose() async {
    try {
      await hotKeyManager.unregisterAll();
      _registeredHotkeys.clear();
      _isInitialized = false;
      _logger.i('ğŸ§¹ HotkeyService disposed');
    } catch (e) {
      _logger.e('âŒ Failed to dispose HotkeyService', error: e);
    }
  }
}
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] hotkey_manager íŒ¨í‚¤ì§€ pubspec.yamlì— ì¶”ê°€
- [ ] `flutter pub get` ì‹¤í–‰
- [ ] HotkeyService í´ë˜ìŠ¤ ì‘ì„±
- [ ] Logger ì—°ë™
- [ ] 5ê°œ ë‹¨ì¶•í‚¤ ì •ì˜ ë° ë“±ë¡ ë©”ì„œë“œ ì‘ì„±
- [ ] ì½œë°± ì„¤ì • ë©”ì„œë“œ ì‘ì„±

#### 2.4.2 Phase 2: main.dart ì´ˆê¸°í™” (30ë¶„)

**lib/main.dart ìˆ˜ì •**

```dart
import 'services/hotkey_service.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  // ê¸°ì¡´ ì´ˆê¸°í™” ì½”ë“œ...

  // HotkeyService ì´ˆê¸°í™” ì¶”ê°€
  await HotkeyService.instance.initialize();

  runApp(const MyApp());
}
```

#### 2.4.3 Phase 3: MainScreen ì—°ë™ (60ë¶„)

**lib/ui/screens/main_screen.dart ìˆ˜ì •**

```dart
@override
void initState() {
  super.initState();
  windowManager.addListener(this);

  // ê¸°ì¡´ ì´ˆê¸°í™”...
  WidgetsBinding.instance.addPostFrameCallback((_) async {
    await _initializeServices();
    _setupHotkeys(); // ì¶”ê°€
  });
}

/// ë‹¨ì¶•í‚¤ ì½œë°± ì„¤ì •
void _setupHotkeys() {
  final hotkeyService = HotkeyService.instance;

  // Ctrl+R: ë…¹í™” ì‹œì‘/ì¤‘ì§€
  hotkeyService.setOnRecordToggle(() {
    if (!mounted) return;

    if (_recorderService.isRecording) {
      _stopRecording();
    } else {
      // ë¹ ë¥¸ ë…¹í™” ì‹œì‘ (ê¸°ë³¸ê°’ ì‚¬ìš©)
      _test10SecRecording(); // ë˜ëŠ” ì˜ˆì•½ëœ ë…¹í™” ì‹œì‘
    }
  });

  // Ctrl+T: 10ì´ˆ í…ŒìŠ¤íŠ¸
  hotkeyService.setOnQuickTest(() {
    if (!mounted) return;
    _test10SecRecording();
  });

  // Ctrl+,: ì„¤ì • ì—´ê¸°
  hotkeyService.setOnOpenSettings(() {
    if (!mounted) return;
    Navigator.push(
      context,
      MaterialPageRoute(builder: (context) => const SettingsScreen()),
    );
  });

  // Esc: ë…¹í™” ì¤‘ì§€ (ë…¹í™” ì¤‘ì¼ ë•Œë§Œ)
  hotkeyService.setOnStopRecording(() {
    if (!mounted) return;
    if (_recorderService.isRecording) {
      _stopRecording();
    }
  });
}

Future<void> _stopRecording() async {
  try {
    await _recorderService.stopRecording();
    logger.i('ë…¹í™” ì¤‘ì§€ë¨ (ë‹¨ì¶•í‚¤)');
  } catch (e) {
    logger.e('ë…¹í™” ì¤‘ì§€ ì‹¤íŒ¨', error: e);
  }
}
```

#### 2.4.4 Phase 4: UIì— ë‹¨ì¶•í‚¤ íŒíŠ¸ í‘œì‹œ (60ë¶„)

**lib/ui/widgets/common/app_button.dart ìˆ˜ì •**

```dart
/// ë‹¨ì¶•í‚¤ íŒíŠ¸ë¥¼ í¬í•¨í•œ ë²„íŠ¼
///
/// `shortcutHint` íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ì—¬ ë²„íŠ¼ ìš°ì¸¡ì— ë‹¨ì¶•í‚¤ í‘œì‹œ
class AppButton extends StatelessWidget {
  final Widget child;
  final VoidCallback? onPressed;
  final IconData? icon;
  final String? shortcutHint; // ì¶”ê°€

  const AppButton.primary({
    required this.child,
    this.onPressed,
    this.icon,
    this.shortcutHint, // ì¶”ê°€
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: onPressed,
      child: Row(
        mainAxisSize: MainAxisSize.min,
        children: [
          if (icon != null) ...[
            Icon(icon, size: 20),
            const SizedBox(width: 8),
          ],
          child,
          // ë‹¨ì¶•í‚¤ íŒíŠ¸ ì¶”ê°€
          if (shortcutHint != null) ...[
            const SizedBox(width: 12),
            Container(
              padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 2),
              decoration: BoxDecoration(
                color: Colors.black.withOpacity(0.1),
                borderRadius: BorderRadius.circular(4),
                border: Border.all(
                  color: Colors.black.withOpacity(0.2),
                  width: 1,
                ),
              ),
              child: Text(
                shortcutHint!,
                style: const TextStyle(
                  fontSize: 11,
                  fontFamily: 'monospace',
                  fontWeight: FontWeight.w600,
                ),
              ),
            ),
          ],
        ],
      ),
    );
  }
}
```

**MainScreenì—ì„œ ì‚¬ìš©:**

```dart
// 10ì´ˆ ë…¹í™” í…ŒìŠ¤íŠ¸ ë²„íŠ¼
AppButton.tonal(
  onPressed: _recorderService.isRecording ? null : () => _test10SecRecording(),
  icon: Icons.play_circle_outline,
  shortcutHint: HotkeyService.getHintText('test'), // ì¶”ê°€
  child: const Text('10ì´ˆ ë…¹í™” í…ŒìŠ¤íŠ¸'),
),

// ì˜ˆì•½ ì €ì¥ ë²„íŠ¼
AppButton.primary(
  onPressed: () => _saveSchedule(context),
  icon: Icons.save,
  shortcutHint: HotkeyService.getHintText('save'), // ì¶”ê°€
  child: const Text('ì˜ˆì•½ ì €ì¥'),
),
```

### 2.5 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| # | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | ê¸°ëŒ€ ê²°ê³¼ |
|---|--------------|----------|
| 1 | `Ctrl+T` ëˆ„ë¦„ (ë©”ì¸ í™”ë©´) | 10ì´ˆ í…ŒìŠ¤íŠ¸ ë…¹í™” ì‹œì‘ |
| 2 | `Ctrl+R` ëˆ„ë¦„ (ì•± ë°±ê·¸ë¼ìš´ë“œ) | ë…¹í™” ì‹œì‘/ì¤‘ì§€ |
| 3 | `Ctrl+S` ëˆ„ë¦„ (ì˜ˆì•½ ì…ë ¥ í›„) | ì˜ˆì•½ ì €ì¥ |
| 4 | `Ctrl+,` ëˆ„ë¦„ | ì„¤ì • í™”ë©´ ì—´ë¦¼ |
| 5 | `Esc` ëˆ„ë¦„ (ë…¹í™” ì¤‘) | ë…¹í™” ì¤‘ì§€ |
| 6 | ë²„íŠ¼ì— ë‹¨ì¶•í‚¤ íŒíŠ¸ í‘œì‹œ | "Ctrl+T" ë°°ì§€ ë³´ì„ |

### 2.6 ì˜ˆìƒ ë‚œì´ë„ ë° ì†Œìš” ì‹œê°„

- **ë‚œì´ë„**: â­â­ (ì‰¬ì›€)
- **ìˆœìˆ˜ ì½”ë”©**: 2.5ì‹œê°„
- **í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹…**: 1ì‹œê°„
- **ì´ ì†Œìš” ì‹œê°„**: **3-4ì‹œê°„**

---

## 3. ê¸°ëŠ¥ 3: ì˜ˆì•½ í…œí”Œë¦¿ ì‹œìŠ¤í…œ

### 3.1 ëª©í‘œ ë° ë²”ìœ„

**ëª©í‘œ:**
- ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì•½ ì„¤ì •ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥
- í…œí”Œë¦¿ 1ë²ˆ í´ë¦­ìœ¼ë¡œ ì˜ˆì•½ ì…ë ¥ í•„ë“œ ìë™ ì±„ìš°ê¸°
- í…œí”Œë¦¿ CRUD (ìƒì„±, ì½ê¸°, ìˆ˜ì •, ì‚­ì œ)

**ë²”ìœ„ IN:**
- í…œí”Œë¦¿ ëª¨ë¸ ì •ì˜ (ì´ë¦„, Zoom ë§í¬, ìš”ì¼/ì‹œê°„, ë…¹í™” ì‹œê°„)
- í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° (SharedPreferences)
- ë©”ì¸ í™”ë©´ "ë¹ ë¥¸ ì˜ˆì•½" ì„¹ì…˜
- í…œí”Œë¦¿ ê´€ë¦¬ í™”ë©´ (CRUD)

**ë²”ìœ„ OUT (v1.0):**
- í…œí”Œë¦¿ ê³µìœ  (export/import)
- í…œí”Œë¦¿ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
- í…œí”Œë¦¿ ì‚¬ìš© íšŸìˆ˜ í†µê³„

### 3.2 ë°ì´í„° ëª¨ë¸

**lib/models/schedule_template.dart (NEW)**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: ì˜ˆì•½ í…œí”Œë¦¿ ë°ì´í„° ëª¨ë¸
//
// ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì•½ ì„¤ì •(Zoom ë§í¬, ì‹œê°„, ë…¹í™” ì‹œê°„)ì„ ì €ì¥í•˜ëŠ” í…œí”Œë¦¿ì…ë‹ˆë‹¤.
// JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”ë¥¼ ì§€ì›í•˜ì—¬ SharedPreferencesì— ì €ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.
//
// ì…ë ¥: í…œí”Œë¦¿ ì´ë¦„, Zoom ë§í¬, ìŠ¤ì¼€ì¤„ íƒ€ì…, ìš”ì¼/ë‚ ì§œ, ì‹œì‘ ì‹œê°„, ë…¹í™” ì‹œê°„
// ì¶œë ¥: ScheduleTemplate ê°ì²´
// ì˜ˆì™¸: í•„ìˆ˜ ê°’ ëˆ„ë½ ì‹œ AssertionError

import 'package:flutter/material.dart';
import 'recording_schedule.dart';

/// ì˜ˆì•½ í…œí”Œë¦¿ ëª¨ë¸
///
/// ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì•½ ì„¤ì •ì„ ì €ì¥í•˜ì—¬ ë¹ ë¥´ê²Œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
///
/// ì˜ˆì‹œ:
/// ```dart
/// final template = ScheduleTemplate(
///   id: 'template-1',
///   name: 'í† ìš”ì¼ ì˜¤ì „ 8ì‹œ ê°•ì˜',
///   zoomLink: 'https://zoom.us/j/123456789',
///   scheduleType: ScheduleType.weekly,
///   dayOfWeek: 6, // í† ìš”ì¼
///   startTime: TimeOfDay(hour: 8, minute: 0),
///   durationMinutes: 80,
/// );
/// ```
class ScheduleTemplate {
  final String id;
  final String name;
  final String zoomLink;
  final ScheduleType scheduleType;
  final int? dayOfWeek; // 0=ì¼ìš”ì¼, 6=í† ìš”ì¼ (ë§¤ì£¼ ë°˜ë³µìš©)
  final DateTime? specificDate; // 1íšŒì„± ì˜ˆì•½ìš©
  final TimeOfDay startTime;
  final int durationMinutes;
  final DateTime createdAt;
  final DateTime lastUsedAt;
  final int useCount; // ì‚¬ìš© íšŸìˆ˜

  ScheduleTemplate({
    required this.id,
    required this.name,
    required this.zoomLink,
    required this.scheduleType,
    this.dayOfWeek,
    this.specificDate,
    required this.startTime,
    required this.durationMinutes,
    DateTime? createdAt,
    DateTime? lastUsedAt,
    this.useCount = 0,
  })  : createdAt = createdAt ?? DateTime.now(),
        lastUsedAt = lastUsedAt ?? DateTime.now();

  /// RecordingScheduleë¡œ ë³€í™˜
  ///
  /// í…œí”Œë¦¿ì„ ì‹¤ì œ ì˜ˆì•½ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
  /// UUIDëŠ” ìƒˆë¡œ ìƒì„±ë˜ë©°, isEnabledëŠ” trueë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
  RecordingSchedule toSchedule({required String scheduleId}) {
    return RecordingSchedule(
      id: scheduleId,
      name: name,
      type: scheduleType,
      dayOfWeek: dayOfWeek,
      specificDate: specificDate,
      startTime: startTime,
      durationMinutes: durationMinutes,
      zoomLink: zoomLink,
      isEnabled: true,
    );
  }

  /// JSON ì§ë ¬í™”
  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'name': name,
      'zoomLink': zoomLink,
      'scheduleType': scheduleType.toString(),
      'dayOfWeek': dayOfWeek,
      'specificDate': specificDate?.toIso8601String(),
      'startTime': '${startTime.hour}:${startTime.minute}',
      'durationMinutes': durationMinutes,
      'createdAt': createdAt.toIso8601String(),
      'lastUsedAt': lastUsedAt.toIso8601String(),
      'useCount': useCount,
    };
  }

  /// JSON ì—­ì§ë ¬í™”
  factory ScheduleTemplate.fromJson(Map<String, dynamic> json) {
    final timeParts = (json['startTime'] as String).split(':');
    return ScheduleTemplate(
      id: json['id'],
      name: json['name'],
      zoomLink: json['zoomLink'],
      scheduleType: ScheduleType.values.firstWhere(
        (e) => e.toString() == json['scheduleType'],
      ),
      dayOfWeek: json['dayOfWeek'],
      specificDate: json['specificDate'] != null
          ? DateTime.parse(json['specificDate'])
          : null,
      startTime: TimeOfDay(
        hour: int.parse(timeParts[0]),
        minute: int.parse(timeParts[1]),
      ),
      durationMinutes: json['durationMinutes'],
      createdAt: DateTime.parse(json['createdAt']),
      lastUsedAt: DateTime.parse(json['lastUsedAt']),
      useCount: json['useCount'] ?? 0,
    );
  }

  /// ì‚¬ìš© ê¸°ë¡ ì—…ë°ì´íŠ¸
  ScheduleTemplate markUsed() {
    return ScheduleTemplate(
      id: id,
      name: name,
      zoomLink: zoomLink,
      scheduleType: scheduleType,
      dayOfWeek: dayOfWeek,
      specificDate: specificDate,
      startTime: startTime,
      durationMinutes: durationMinutes,
      createdAt: createdAt,
      lastUsedAt: DateTime.now(),
      useCount: useCount + 1,
    );
  }

  /// í…œí”Œë¦¿ í‘œì‹œ ì´ë¦„ (UIìš©)
  String get displayName {
    final scheduleInfo = scheduleType == ScheduleType.weekly
        ? 'ë§¤ì£¼ ${_dayOfWeekName(dayOfWeek!)}'
        : '${specificDate!.month}/${specificDate!.day}';
    final timeInfo = '${startTime.hour.toString().padLeft(2, '0')}:${startTime.minute.toString().padLeft(2, '0')}';
    return '$name Â· $scheduleInfo $timeInfo Â· ${durationMinutes}ë¶„';
  }

  String _dayOfWeekName(int day) {
    return ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][day];
  }

  ScheduleTemplate copyWith({
    String? id,
    String? name,
    String? zoomLink,
    ScheduleType? scheduleType,
    int? dayOfWeek,
    DateTime? specificDate,
    TimeOfDay? startTime,
    int? durationMinutes,
    DateTime? createdAt,
    DateTime? lastUsedAt,
    int? useCount,
  }) {
    return ScheduleTemplate(
      id: id ?? this.id,
      name: name ?? this.name,
      zoomLink: zoomLink ?? this.zoomLink,
      scheduleType: scheduleType ?? this.scheduleType,
      dayOfWeek: dayOfWeek ?? this.dayOfWeek,
      specificDate: specificDate ?? this.specificDate,
      startTime: startTime ?? this.startTime,
      durationMinutes: durationMinutes ?? this.durationMinutes,
      createdAt: createdAt ?? this.createdAt,
      lastUsedAt: lastUsedAt ?? this.lastUsedAt,
      useCount: useCount ?? this.useCount,
    );
  }
}
```

### 3.3 ì„œë¹„ìŠ¤ ë ˆì´ì–´

**lib/services/template_service.dart (NEW)**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: ì˜ˆì•½ í…œí”Œë¦¿ CRUD ê´€ë¦¬ ì„œë¹„ìŠ¤
//
// SharedPreferencesë¥¼ ì‚¬ìš©í•˜ì—¬ í…œí”Œë¦¿ì„ ì˜êµ¬ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
// í…œí”Œë¦¿ ìƒì„±, ì½ê¸°, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
//
// ì…ë ¥: ScheduleTemplate ê°ì²´
// ì¶œë ¥: ì €ì¥/ìˆ˜ì •/ì‚­ì œ ê²°ê³¼, í…œí”Œë¦¿ ëª©ë¡
// ì˜ˆì™¸: SharedPreferences ì ‘ê·¼ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë¡œê·¸

import 'dart:convert';
import 'package:shared_preferences/shared_preferences.dart';
import '../models/schedule_template.dart';
import '../utils/logger_service.dart';

/// ì˜ˆì•½ í…œí”Œë¦¿ ì„œë¹„ìŠ¤
///
/// í…œí”Œë¦¿ì„ SharedPreferencesì— JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.
/// Key: 'schedule_templates'
/// Value: List<Map<String, dynamic>>
class TemplateService {
  static final TemplateService _instance = TemplateService._internal();
  static TemplateService get instance => _instance;

  final Logger _logger = LoggerService.instance.logger;
  final String _storageKey = 'schedule_templates';

  List<ScheduleTemplate> _templates = [];
  bool _isInitialized = false;

  TemplateService._internal();

  /// ì´ˆê¸°í™”
  Future<void> initialize() async {
    if (_isInitialized) return;

    try {
      await _loadTemplates();
      _isInitialized = true;
      _logger.i('âœ… TemplateService initialized: ${_templates.length} templates');
    } catch (e, stackTrace) {
      _logger.e('âŒ Failed to initialize TemplateService', error: e, stackTrace: stackTrace);
    }
  }

  /// ëª¨ë“  í…œí”Œë¦¿ ë¶ˆëŸ¬ì˜¤ê¸°
  Future<void> _loadTemplates() async {
    final prefs = await SharedPreferences.getInstance();
    final jsonString = prefs.getString(_storageKey);

    if (jsonString == null || jsonString.isEmpty) {
      _templates = [];
      return;
    }

    try {
      final List<dynamic> jsonList = jsonDecode(jsonString);
      _templates = jsonList.map((json) => ScheduleTemplate.fromJson(json)).toList();

      // ë§ˆì§€ë§‰ ì‚¬ìš© ì‹œê°„ ê¸°ì¤€ ì •ë ¬ (ìµœê·¼ ì‚¬ìš© ìˆœ)
      _templates.sort((a, b) => b.lastUsedAt.compareTo(a.lastUsedAt));
    } catch (e) {
      _logger.e('Failed to parse templates JSON', error: e);
      _templates = [];
    }
  }

  /// í…œí”Œë¦¿ ì €ì¥
  Future<void> _saveTemplates() async {
    try {
      final prefs = await SharedPreferences.getInstance();
      final jsonList = _templates.map((t) => t.toJson()).toList();
      final jsonString = jsonEncode(jsonList);
      await prefs.setString(_storageKey, jsonString);
    } catch (e, stackTrace) {
      _logger.e('Failed to save templates', error: e, stackTrace: stackTrace);
      rethrow;
    }
  }

  /// í…œí”Œë¦¿ ì¶”ê°€
  Future<void> addTemplate(ScheduleTemplate template) async {
    _templates.add(template);
    await _saveTemplates();
    _logger.i('âœ… Template added: ${template.name}');
  }

  /// í…œí”Œë¦¿ ìˆ˜ì •
  Future<void> updateTemplate(ScheduleTemplate template) async {
    final index = _templates.indexWhere((t) => t.id == template.id);
    if (index != -1) {
      _templates[index] = template;
      await _saveTemplates();
      _logger.i('âœ… Template updated: ${template.name}');
    }
  }

  /// í…œí”Œë¦¿ ì‚­ì œ
  Future<void> deleteTemplate(String templateId) async {
    _templates.removeWhere((t) => t.id == templateId);
    await _saveTemplates();
    _logger.i('âœ… Template deleted: $templateId');
  }

  /// í…œí”Œë¦¿ ì‚¬ìš© ê¸°ë¡
  Future<void> markTemplateUsed(String templateId) async {
    final index = _templates.indexWhere((t) => t.id == templateId);
    if (index != -1) {
      _templates[index] = _templates[index].markUsed();
      await _saveTemplates();
    }
  }

  /// ëª¨ë“  í…œí”Œë¦¿ ê°€ì ¸ì˜¤ê¸°
  List<ScheduleTemplate> get templates => List.unmodifiable(_templates);

  /// í…œí”Œë¦¿ IDë¡œ ê²€ìƒ‰
  ScheduleTemplate? getTemplate(String id) {
    try {
      return _templates.firstWhere((t) => t.id == id);
    } catch (e) {
      return null;
    }
  }

  void dispose() {
    _templates.clear();
    _isInitialized = false;
  }
}
```

### 3.4 UI êµ¬í˜„

#### 3.4.1 ë©”ì¸ í™”ë©´ "ë¹ ë¥¸ ì˜ˆì•½" ì„¹ì…˜

**lib/ui/screens/main_screen.dart ìˆ˜ì •**

```dart
// _buildScheduleInputCard() ìœ„ì— ì¶”ê°€
Widget _buildQuickTemplates() {
  final templates = TemplateService.instance.templates;

  if (templates.isEmpty) {
    return const SizedBox.shrink();
  }

  return AppCard.level1(
    child: Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Row(
          children: [
            const Icon(Icons.flash_on, color: Colors.orange, size: 20),
            const SizedBox(width: 8),
            Text('ë¹ ë¥¸ ì˜ˆì•½', style: AppTypography.titleSmall),
            const Spacer(),
            TextButton.icon(
              onPressed: () {
                Navigator.push(
                  context,
                  MaterialPageRoute(builder: (context) => const TemplateManagerScreen()),
                );
              },
              icon: const Icon(Icons.settings, size: 16),
              label: const Text('ê´€ë¦¬'),
            ),
          ],
        ),
        const SizedBox(height: AppSpacing.sm),

        // í…œí”Œë¦¿ ëª©ë¡ (ìµœëŒ€ 3ê°œ í‘œì‹œ)
        Wrap(
          spacing: 8,
          runSpacing: 8,
          children: templates.take(3).map((template) {
            return TemplateChip(
              template: template,
              onTap: () => _applyTemplate(template),
            );
          }).toList(),
        ),
      ],
    ),
  );
}

/// í…œí”Œë¦¿ ì ìš©
Future<void> _applyTemplate(ScheduleTemplate template) async {
  setState(() {
    _zoomLinkController.text = template.zoomLink;
    _startTimeController.text = '${template.startTime.hour.toString().padLeft(2, '0')}:${template.startTime.minute.toString().padLeft(2, '0')}';
    _durationController.text = template.durationMinutes.toString();
    _scheduleType = template.scheduleType;
    _selectedDayOfWeek = template.dayOfWeek ?? 6;
    _selectedDate = template.specificDate;
  });

  // ì‚¬ìš© ê¸°ë¡
  await TemplateService.instance.markTemplateUsed(template.id);

  if (context.mounted) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
        content: Text('âœ… í…œí”Œë¦¿ "${template.name}" ì ìš©ë¨'),
        duration: const Duration(seconds: 2),
      ),
    );
  }
}
```

**lib/ui/widgets/template_chip.dart (NEW)**

```dart
import 'package:flutter/material.dart';
import '../../models/schedule_template.dart';

/// í…œí”Œë¦¿ ì¹© ìœ„ì ¯
class TemplateChip extends StatelessWidget {
  final ScheduleTemplate template;
  final VoidCallback onTap;

  const TemplateChip({
    required this.template,
    required this.onTap,
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    return InkWell(
      onTap: onTap,
      borderRadius: BorderRadius.circular(8),
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
        decoration: BoxDecoration(
          color: Colors.blue.shade50,
          borderRadius: BorderRadius.circular(8),
          border: Border.all(color: Colors.blue.shade200),
        ),
        child: Row(
          mainAxisSize: MainAxisSize.min,
          children: [
            const Icon(Icons.schedule, size: 16, color: Colors.blue),
            const SizedBox(width: 6),
            Text(
              template.name,
              style: const TextStyle(
                fontSize: 13,
                fontWeight: FontWeight.w600,
                color: Colors.blue,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

#### 3.4.2 í…œí”Œë¦¿ ê´€ë¦¬ í™”ë©´

**lib/ui/screens/template_manager_screen.dart (NEW)**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: ì˜ˆì•½ í…œí”Œë¦¿ ê´€ë¦¬ í™”ë©´
//
// ì €ì¥ëœ í…œí”Œë¦¿ ëª©ë¡ì„ í‘œì‹œí•˜ê³ , ì¶”ê°€/ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// í…œí”Œë¦¿ì„ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ìˆ˜ì •/ì‚­ì œ ì˜µì…˜ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
//
// ì…ë ¥: ì—†ìŒ
// ì¶œë ¥: í…œí”Œë¦¿ ëª©ë¡ UI
// ì˜ˆì™¸: ì—†ìŒ

import 'package:flutter/material.dart';
import 'package:uuid/uuid.dart';
import '../../models/schedule_template.dart';
import '../../models/recording_schedule.dart';
import '../../services/template_service.dart';

class TemplateManagerScreen extends StatefulWidget {
  const TemplateManagerScreen({super.key});

  @override
  State<TemplateManagerScreen> createState() => _TemplateManagerScreenState();
}

class _TemplateManagerScreenState extends State<TemplateManagerScreen> {
  final TemplateService _templateService = TemplateService.instance;

  @override
  Widget build(BuildContext context) {
    final templates = _templateService.templates;

    return Scaffold(
      appBar: AppBar(
        title: const Text('í…œí”Œë¦¿ ê´€ë¦¬'),
      ),
      body: templates.isEmpty
          ? _buildEmptyState()
          : ListView.builder(
              padding: const EdgeInsets.all(16),
              itemCount: templates.length,
              itemBuilder: (context, index) {
                final template = templates[index];
                return _buildTemplateCard(template);
              },
            ),
      floatingActionButton: FloatingActionButton.extended(
        onPressed: _showAddTemplateDialog,
        icon: const Icon(Icons.add),
        label: const Text('ìƒˆ í…œí”Œë¦¿'),
      ),
    );
  }

  Widget _buildEmptyState() {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(Icons.inbox_outlined, size: 64, color: Colors.grey.shade400),
          const SizedBox(height: 16),
          Text(
            'ì €ì¥ëœ í…œí”Œë¦¿ì´ ì—†ìŠµë‹ˆë‹¤',
            style: TextStyle(fontSize: 16, color: Colors.grey.shade600),
          ),
          const SizedBox(height: 8),
          Text(
            'ìì£¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì•½ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥í•˜ì„¸ìš”',
            style: TextStyle(fontSize: 14, color: Colors.grey.shade500),
          ),
        ],
      ),
    );
  }

  Widget _buildTemplateCard(ScheduleTemplate template) {
    return Card(
      margin: const EdgeInsets.only(bottom: 12),
      child: ListTile(
        leading: Container(
          width: 48,
          height: 48,
          decoration: BoxDecoration(
            color: Colors.blue.shade50,
            borderRadius: BorderRadius.circular(8),
          ),
          child: const Icon(Icons.bookmark, color: Colors.blue),
        ),
        title: Text(
          template.name,
          style: const TextStyle(fontWeight: FontWeight.bold),
        ),
        subtitle: Text(template.displayName),
        trailing: PopupMenuButton(
          itemBuilder: (context) => [
            const PopupMenuItem(
              value: 'edit',
              child: Row(
                children: [
                  Icon(Icons.edit, size: 20),
                  SizedBox(width: 8),
                  Text('ìˆ˜ì •'),
                ],
              ),
            ),
            const PopupMenuItem(
              value: 'delete',
              child: Row(
                children: [
                  Icon(Icons.delete, size: 20, color: Colors.red),
                  SizedBox(width: 8),
                  Text('ì‚­ì œ', style: TextStyle(color: Colors.red)),
                ],
              ),
            ),
          ],
          onSelected: (value) {
            if (value == 'edit') {
              _showEditTemplateDialog(template);
            } else if (value == 'delete') {
              _confirmDeleteTemplate(template);
            }
          },
        ),
      ),
    );
  }

  /// í…œí”Œë¦¿ ì¶”ê°€ ë‹¤ì´ì–¼ë¡œê·¸
  void _showAddTemplateDialog() {
    // TODO: í…œí”Œë¦¿ ì…ë ¥ í¼ ë‹¤ì´ì–¼ë¡œê·¸
    // í˜„ì¬ ì˜ˆì•½ ì…ë ¥ í™”ë©´ê³¼ ìœ ì‚¬í•œ UI
  }

  /// í…œí”Œë¦¿ ìˆ˜ì • ë‹¤ì´ì–¼ë¡œê·¸
  void _showEditTemplateDialog(ScheduleTemplate template) {
    // TODO: ê¸°ì¡´ í…œí”Œë¦¿ ê°’ìœ¼ë¡œ í¼ ì±„ì›Œì„œ í‘œì‹œ
  }

  /// í…œí”Œë¦¿ ì‚­ì œ í™•ì¸
  Future<void> _confirmDeleteTemplate(ScheduleTemplate template) async {
    final confirmed = await showDialog<bool>(
      context: context,
      builder: (context) => AlertDialog(
        title: const Text('í…œí”Œë¦¿ ì‚­ì œ'),
        content: Text('"${template.name}" í…œí”Œë¦¿ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?'),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(context, false),
            child: const Text('ì·¨ì†Œ'),
          ),
          ElevatedButton(
            onPressed: () => Navigator.pop(context, true),
            style: ElevatedButton.styleFrom(backgroundColor: Colors.red),
            child: const Text('ì‚­ì œ'),
          ),
        ],
      ),
    );

    if (confirmed == true) {
      await _templateService.deleteTemplate(template.id);
      setState(() {});
      if (context.mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          const SnackBar(content: Text('âœ… í…œí”Œë¦¿ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤')),
        );
      }
    }
  }
}
```

### 3.5 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| # | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | ê¸°ëŒ€ ê²°ê³¼ |
|---|--------------|----------|
| 1 | í…œí”Œë¦¿ ì¶”ê°€ (ìƒˆ í…œí”Œë¦¿ ë²„íŠ¼) | í¼ ì…ë ¥ í›„ ëª©ë¡ì— ì¶”ê°€ë¨ |
| 2 | ë¹ ë¥¸ ì˜ˆì•½ì—ì„œ í…œí”Œë¦¿ í´ë¦­ | ì˜ˆì•½ ì…ë ¥ í•„ë“œ ìë™ ì±„ì›Œì§ |
| 3 | í…œí”Œë¦¿ ìˆ˜ì • | ì´ë¦„/ë§í¬/ì‹œê°„ ë³€ê²½ ì €ì¥ë¨ |
| 4 | í…œí”Œë¦¿ ì‚­ì œ | í™•ì¸ í›„ ëª©ë¡ì—ì„œ ì œê±°ë¨ |
| 5 | ì•± ì¬ì‹œì‘ | í…œí”Œë¦¿ ëª©ë¡ ìœ ì§€ë¨ |

### 3.6 ì˜ˆìƒ ë‚œì´ë„ ë° ì†Œìš” ì‹œê°„

- **ë‚œì´ë„**: â­â­â­ (ì¤‘ê°„)
- **ìˆœìˆ˜ ì½”ë”©**: 3.5ì‹œê°„
- **UI ë””ìì¸ ë° í…ŒìŠ¤íŠ¸**: 1.5ì‹œê°„
- **ì´ ì†Œìš” ì‹œê°„**: **4-5ì‹œê°„**

---

## 4. ê¸°ëŠ¥ 5: ë…¹í™” íˆìŠ¤í† ë¦¬ ëŒ€ì‹œë³´ë“œ

### 4.1 ëª©í‘œ ë° ë²”ìœ„

**ëª©í‘œ:**
- ê³¼ê±° ë…¹í™” ê¸°ë¡ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œ
- ì„±ê³µë¥  ê³„ì‚° ë° í‘œì‹œ
- íŒŒì¼ ë¹ ë¥¸ ì ‘ê·¼ (í´ë” ì—´ê¸°, ì¬ìƒ)

**ë²”ìœ„ IN:**
- ë©”íƒ€ JSON íŒŒì¼ íŒŒì‹±
- ì„±ê³µ/ì‹¤íŒ¨/ê²½ê³  íŒì •
- ìµœê·¼ 4ì£¼ ì„±ê³µë¥  ê³„ì‚°
- íˆìŠ¤í† ë¦¬ ëª©ë¡ (ìµœì‹ ìˆœ ì •ë ¬)
- íŒŒì¼ ì—´ê¸° ë²„íŠ¼

**ë²”ìœ„ OUT (v1.0):**
- ì¸ë„¤ì¼ ìƒì„± (FFmpeg - ì‹œê°„ ì†Œìš” í¼)
- ì¬ìƒ í”Œë ˆì´ì–´ ë‚´ì¥
- í†µê³„ ê·¸ë˜í”„ (ì°¨íŠ¸)
- í•„í„°ë§ (ë‚ ì§œ ë²”ìœ„, ì„±ê³µ/ì‹¤íŒ¨)

### 4.2 ë°ì´í„° ëª¨ë¸

**lib/models/recording_history.dart (NEW)**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: ë…¹í™” íˆìŠ¤í† ë¦¬ ë°ì´í„° ëª¨ë¸
//
// ë©”íƒ€ JSON íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ ë…¹í™” ê¸°ë¡ì„ í‘œí˜„í•©ë‹ˆë‹¤.
// ì„±ê³µ/ì‹¤íŒ¨/ê²½ê³  ìƒíƒœë¥¼ íŒì •í•©ë‹ˆë‹¤.
//
// ì…ë ¥: ë©”íƒ€ JSON íŒŒì¼ ê²½ë¡œ
// ì¶œë ¥: RecordingHistory ê°ì²´
// ì˜ˆì™¸: JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ null ë°˜í™˜

import 'dart:io';
import 'dart:convert';

enum RecordingStatus {
  success,  // ì •ìƒ ì™„ë£Œ
  warning,  // ê²½ê³  (ë¬´ìŒ, ë“œë¡­ í”„ë ˆì„ ë†’ìŒ)
  failed,   // ì‹¤íŒ¨ (íŒŒì¼ ì—†ìŒ, í¬ê¸° ì‘ìŒ)
}

class RecordingHistory {
  final String id;
  final String? name;
  final String videoPath;
  final String metaPath;
  final DateTime recordedAt;
  final int durationSeconds;
  final int fileSizeBytes;
  final int videoWidth;
  final int videoHeight;
  final int videoFps;
  final double? dropRate;
  final String? encoder;
  final RecordingStatus status;
  final String? statusReason;

  RecordingHistory({
    required this.id,
    this.name,
    required this.videoPath,
    required this.metaPath,
    required this.recordedAt,
    required this.durationSeconds,
    required this.fileSizeBytes,
    required this.videoWidth,
    required this.videoHeight,
    required this.videoFps,
    this.dropRate,
    this.encoder,
    required this.status,
    this.statusReason,
  });

  /// ë©”íƒ€ JSON íŒŒì¼ì—ì„œ ë¡œë“œ
  static Future<RecordingHistory?> fromMetaFile(File metaFile) async {
    try {
      final jsonString = await metaFile.readAsString();
      final Map<String, dynamic> meta = jsonDecode(jsonString);

      // ë¹„ë””ì˜¤ íŒŒì¼ ê²½ë¡œ
      final videoPath = metaFile.path.replaceAll('.json', '');
      final videoFile = File(videoPath);

      // ìƒíƒœ íŒì •
      final status = _determineStatus(meta, videoFile);

      return RecordingHistory(
        id: meta['id'] ?? metaFile.path,
        name: meta['name'],
        videoPath: videoPath,
        metaPath: metaFile.path,
        recordedAt: DateTime.parse(meta['recorded_at'] ?? meta['started_at']),
        durationSeconds: meta['duration_seconds'] ?? 0,
        fileSizeBytes: videoFile.existsSync() ? videoFile.lengthSync() : 0,
        videoWidth: meta['video_width'] ?? 0,
        videoHeight: meta['video_height'] ?? 0,
        videoFps: meta['video_fps'] ?? 0,
        dropRate: meta['drop_rate']?.toDouble(),
        encoder: meta['encoder'],
        status: status.$1,
        statusReason: status.$2,
      );
    } catch (e) {
      print('Failed to parse meta file: ${metaFile.path}, error: $e');
      return null;
    }
  }

  /// ìƒíƒœ íŒì • ë¡œì§
  static (RecordingStatus, String?) _determineStatus(
    Map<String, dynamic> meta,
    File videoFile,
  ) {
    // 1. íŒŒì¼ ì¡´ì¬ ì—¬ë¶€
    if (!videoFile.existsSync()) {
      return (RecordingStatus.failed, 'íŒŒì¼ ì—†ìŒ');
    }

    // 2. íŒŒì¼ í¬ê¸° (1MB ë¯¸ë§Œ)
    if (videoFile.lengthSync() < 1024 * 1024) {
      return (RecordingStatus.failed, 'íŒŒì¼ í¬ê¸° ë„ˆë¬´ ì‘ìŒ');
    }

    // 3. ë“œë¡­ í”„ë ˆì„ (1% ì´ìƒ)
    final dropRate = meta['drop_rate']?.toDouble();
    if (dropRate != null && dropRate > 0.01) {
      return (RecordingStatus.warning, 'ë“œë¡­ í”„ë ˆì„ ë†’ìŒ: ${(dropRate * 100).toStringAsFixed(1)}%');
    }

    // 4. ë…¹í™” ì‹œê°„ (ì˜ˆìƒ ì‹œê°„ì˜ 90% ë¯¸ë§Œ)
    final scheduledDuration = meta['scheduled_duration_sec'];
    final actualDuration = meta['duration_seconds'];
    if (scheduledDuration != null && actualDuration != null) {
      if (actualDuration < scheduledDuration * 0.9) {
        return (RecordingStatus.warning, 'ë…¹í™” ì‹œê°„ ì§§ìŒ: ${actualDuration}ì´ˆ / ${scheduledDuration}ì´ˆ');
      }
    }

    // ì •ìƒ
    return (RecordingStatus.success, null);
  }

  /// íŒŒì¼ í¬ê¸°ë¥¼ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•ì‹ìœ¼ë¡œ
  String get fileSizeFormatted {
    if (fileSizeBytes >= 1024 * 1024 * 1024) {
      return '${(fileSizeBytes / 1024 / 1024 / 1024).toStringAsFixed(1)} GB';
    } else {
      return '${(fileSizeBytes / 1024 / 1024).toStringAsFixed(1)} MB';
    }
  }

  /// ë…¹í™” ì‹œê°„ì„ "Xì‹œê°„ Yë¶„" í˜•ì‹ìœ¼ë¡œ
  String get durationFormatted {
    final hours = durationSeconds ~/ 3600;
    final minutes = (durationSeconds % 3600) ~/ 60;

    if (hours > 0) {
      return '$hoursì‹œê°„ ${minutes}ë¶„';
    } else {
      return '${minutes}ë¶„';
    }
  }
}
```

### 4.3 ì„œë¹„ìŠ¤ ë ˆì´ì–´

**lib/services/history_service.dart (NEW)**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: ë…¹í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬ ì„œë¹„ìŠ¤
//
// ì €ì¥ í´ë”ì—ì„œ ë©”íƒ€ JSON íŒŒì¼ì„ ìŠ¤ìº”í•˜ì—¬ íˆìŠ¤í† ë¦¬ ëª©ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.
// ì„±ê³µë¥ ì„ ê³„ì‚°í•©ë‹ˆë‹¤.
//
// ì…ë ¥: ì—†ìŒ
// ì¶œë ¥: íˆìŠ¤í† ë¦¬ ëª©ë¡, ì„±ê³µë¥ 
// ì˜ˆì™¸: í´ë” ì ‘ê·¼ ì‹¤íŒ¨ ì‹œ ë¹ˆ ëª©ë¡ ë°˜í™˜

import 'dart:io';
import 'package:path_provider/path_provider.dart';
import '../models/recording_history.dart';
import '../services/settings_service.dart';
import '../utils/logger_service.dart';

class HistoryService {
  static final HistoryService _instance = HistoryService._internal();
  static HistoryService get instance => _instance;

  final Logger _logger = LoggerService.instance.logger;
  final SettingsService _settingsService = SettingsService();

  List<RecordingHistory> _histories = [];
  bool _isLoaded = false;

  HistoryService._internal();

  /// íˆìŠ¤í† ë¦¬ ë¡œë“œ
  Future<void> loadHistories() async {
    try {
      final savePath = _settingsService.settings.saveFolderPath;
      final directory = Directory(savePath);

      if (!directory.existsSync()) {
        _logger.w('âš ï¸ Save directory not found: $savePath');
        _histories = [];
        _isLoaded = true;
        return;
      }

      // *.mp4.json íŒŒì¼ ê²€ìƒ‰
      final metaFiles = directory
          .listSync()
          .whereType<File>()
          .where((f) => f.path.endsWith('.mp4.json'))
          .toList();

      _logger.i('ğŸ“‚ Found ${metaFiles.length} meta files');

      // íŒŒì‹±
      final futures = metaFiles.map((file) => RecordingHistory.fromMetaFile(file));
      final results = await Future.wait(futures);

      _histories = results.whereType<RecordingHistory>().toList();

      // ìµœì‹ ìˆœ ì •ë ¬
      _histories.sort((a, b) => b.recordedAt.compareTo(a.recordedAt));

      _isLoaded = true;
      _logger.i('âœ… Loaded ${_histories.length} recording histories');
    } catch (e, stackTrace) {
      _logger.e('âŒ Failed to load histories', error: e, stackTrace: stackTrace);
      _histories = [];
      _isLoaded = true;
    }
  }

  /// ìµœê·¼ Nì£¼ ì„±ê³µë¥  ê³„ì‚°
  double getSuccessRate({int weeks = 4}) {
    final cutoff = DateTime.now().subtract(Duration(days: weeks * 7));
    final recentHistories = _histories.where((h) => h.recordedAt.isAfter(cutoff)).toList();

    if (recentHistories.isEmpty) return 0.0;

    final successCount = recentHistories.where((h) => h.status == RecordingStatus.success).length;
    return (successCount / recentHistories.length) * 100;
  }

  /// ì„±ê³µ/ê²½ê³ /ì‹¤íŒ¨ ì¹´ìš´íŠ¸
  Map<RecordingStatus, int> getStatusCounts({int weeks = 4}) {
    final cutoff = DateTime.now().subtract(Duration(days: weeks * 7));
    final recentHistories = _histories.where((h) => h.recordedAt.isAfter(cutoff)).toList();

    return {
      RecordingStatus.success: recentHistories.where((h) => h.status == RecordingStatus.success).length,
      RecordingStatus.warning: recentHistories.where((h) => h.status == RecordingStatus.warning).length,
      RecordingStatus.failed: recentHistories.where((h) => h.status == RecordingStatus.failed).length,
    };
  }

  /// ëª¨ë“  íˆìŠ¤í† ë¦¬ ë°˜í™˜
  List<RecordingHistory> get histories => List.unmodifiable(_histories);

  /// íˆìŠ¤í† ë¦¬ ìƒˆë¡œê³ ì¹¨
  Future<void> refresh() async {
    _isLoaded = false;
    await loadHistories();
  }

  void dispose() {
    _histories.clear();
    _isLoaded = false;
  }
}
```

### 4.4 UI êµ¬í˜„

**lib/ui/screens/history_screen.dart (NEW)**

```dart
// ë¬´ì—‡ì„ í•˜ëŠ” ì½”ë“œì¸ì§€: ë…¹í™” íˆìŠ¤í† ë¦¬ í™”ë©´
//
// ê³¼ê±° ë…¹í™” ê¸°ë¡ì„ ëª©ë¡ìœ¼ë¡œ í‘œì‹œí•˜ê³ , ì„±ê³µë¥ ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
// ê° ê¸°ë¡ì„ íƒ­í•˜ë©´ íŒŒì¼ ìœ„ì¹˜ë¥¼ ì—´ê±°ë‚˜ ì¬ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
//
// ì…ë ¥: ì—†ìŒ
// ì¶œë ¥: íˆìŠ¤í† ë¦¬ ëª©ë¡ UI
// ì˜ˆì™¸: ì—†ìŒ

import 'package:flutter/material.dart';
import 'dart:io';
import '../../models/recording_history.dart';
import '../../services/history_service.dart';
import '../widgets/common/app_card.dart';

class HistoryScreen extends StatefulWidget {
  const HistoryScreen({super.key});

  @override
  State<HistoryScreen> createState() => _HistoryScreenState();
}

class _HistoryScreenState extends State<HistoryScreen> {
  final HistoryService _historyService = HistoryService.instance;
  bool _isLoading = true;

  @override
  void initState() {
    super.initState();
    _loadHistories();
  }

  Future<void> _loadHistories() async {
    setState(() => _isLoading = true);
    await _historyService.loadHistories();
    if (mounted) {
      setState(() => _isLoading = false);
    }
  }

  @override
  Widget build(BuildContext context) {
    if (_isLoading) {
      return Scaffold(
        appBar: AppBar(title: const Text('ë…¹í™” íˆìŠ¤í† ë¦¬')),
        body: const Center(child: CircularProgressIndicator()),
      );
    }

    final histories = _historyService.histories;

    return Scaffold(
      appBar: AppBar(
        title: const Text('ë…¹í™” íˆìŠ¤í† ë¦¬'),
        actions: [
          IconButton(
            icon: const Icon(Icons.refresh),
            onPressed: _loadHistories,
          ),
        ],
      ),
      body: Column(
        children: [
          // ìƒë‹¨ ì„±ê³µë¥  ì¹´ë“œ
          _buildSuccessRateCard(),

          const Divider(),

          // íˆìŠ¤í† ë¦¬ ëª©ë¡
          Expanded(
            child: histories.isEmpty
                ? _buildEmptyState()
                : ListView.builder(
                    padding: const EdgeInsets.all(16),
                    itemCount: histories.length,
                    itemBuilder: (context, index) {
                      return _buildHistoryCard(histories[index]);
                    },
                  ),
          ),
        ],
      ),
    );
  }

  Widget _buildSuccessRateCard() {
    final successRate = _historyService.getSuccessRate(weeks: 4);
    final counts = _historyService.getStatusCounts(weeks: 4);
    final total = counts.values.reduce((a, b) => a + b);

    return Container(
      margin: const EdgeInsets.all(16),
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        gradient: LinearGradient(
          colors: [Colors.blue.shade700, Colors.blue.shade500],
        ),
        borderRadius: BorderRadius.circular(12),
      ),
      child: Column(
        children: [
          const Text(
            'ìµœê·¼ 4ì£¼ ì„±ê³µë¥ ',
            style: TextStyle(color: Colors.white, fontSize: 14),
          ),
          const SizedBox(height: 8),
          Text(
            '${successRate.toStringAsFixed(1)}%',
            style: const TextStyle(
              color: Colors.white,
              fontSize: 36,
              fontWeight: FontWeight.bold,
            ),
          ),
          const SizedBox(height: 4),
          Text(
            '${counts[RecordingStatus.success]}/${total}ê±´ ì„±ê³µ',
            style: TextStyle(color: Colors.white.withOpacity(0.9), fontSize: 14),
          ),
          if (counts[RecordingStatus.warning]! > 0 || counts[RecordingStatus.failed]! > 0) ...[
            const SizedBox(height: 12),
            Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                if (counts[RecordingStatus.warning]! > 0)
                  Text(
                    'âš ï¸ ê²½ê³  ${counts[RecordingStatus.warning]}ê±´',
                    style: TextStyle(color: Colors.orange.shade200, fontSize: 12),
                  ),
                if (counts[RecordingStatus.warning]! > 0 && counts[RecordingStatus.failed]! > 0)
                  const SizedBox(width: 16),
                if (counts[RecordingStatus.failed]! > 0)
                  Text(
                    'âŒ ì‹¤íŒ¨ ${counts[RecordingStatus.failed]}ê±´',
                    style: TextStyle(color: Colors.red.shade200, fontSize: 12),
                  ),
              ],
            ),
          ],
        ],
      ),
    );
  }

  Widget _buildEmptyState() {
    return Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(Icons.history, size: 64, color: Colors.grey.shade400),
          const SizedBox(height: 16),
          Text(
            'ë…¹í™” ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤',
            style: TextStyle(fontSize: 16, color: Colors.grey.shade600),
          ),
        ],
      ),
    );
  }

  Widget _buildHistoryCard(RecordingHistory history) {
    Color statusColor;
    IconData statusIcon;

    switch (history.status) {
      case RecordingStatus.success:
        statusColor = Colors.green;
        statusIcon = Icons.check_circle;
        break;
      case RecordingStatus.warning:
        statusColor = Colors.orange;
        statusIcon = Icons.warning;
        break;
      case RecordingStatus.failed:
        statusColor = Colors.red;
        statusIcon = Icons.error;
        break;
    }

    return Card(
      margin: const EdgeInsets.only(bottom: 12),
      child: ListTile(
        leading: Container(
          width: 48,
          height: 48,
          decoration: BoxDecoration(
            color: statusColor.withOpacity(0.1),
            borderRadius: BorderRadius.circular(8),
          ),
          child: Icon(statusIcon, color: statusColor),
        ),
        title: Text(
          history.name ?? 'ë…¹í™” íŒŒì¼',
          style: const TextStyle(fontWeight: FontWeight.bold),
        ),
        subtitle: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              '${history.recordedAt.year}-${history.recordedAt.month.toString().padLeft(2, '0')}-${history.recordedAt.day.toString().padLeft(2, '0')} ${history.recordedAt.hour.toString().padLeft(2, '0')}:${history.recordedAt.minute.toString().padLeft(2, '0')}',
            ),
            Text('${history.durationFormatted} Â· ${history.fileSizeFormatted}'),
            if (history.statusReason != null)
              Text(
                history.statusReason!,
                style: TextStyle(color: statusColor, fontSize: 12),
              ),
          ],
        ),
        trailing: IconButton(
          icon: const Icon(Icons.folder_open),
          onPressed: () => _openFileLocation(history.videoPath),
        ),
      ),
    );
  }

  /// íŒŒì¼ ìœ„ì¹˜ ì—´ê¸°
  Future<void> _openFileLocation(String filePath) async {
    try {
      final file = File(filePath);
      if (!file.existsSync()) {
        if (context.mounted) {
          ScaffoldMessenger.of(context).showSnackBar(
            const SnackBar(content: Text('âŒ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')),
          );
        }
        return;
      }

      // Windows: explorer.exe /select,"path"
      await Process.run('explorer.exe', ['/select,', filePath]);
    } catch (e) {
      if (context.mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨: $e')),
        );
      }
    }
  }
}
```

### 4.5 ë©”ì¸ í™”ë©´ì— íˆìŠ¤í† ë¦¬ ë²„íŠ¼ ì¶”ê°€

**lib/ui/screens/main_screen.dart AppBar actions ìˆ˜ì •**

```dart
actions: [
  // íˆìŠ¤í† ë¦¬ ë²„íŠ¼ ì¶”ê°€
  IconButton(
    icon: const Icon(Icons.history),
    tooltip: 'ë…¹í™” íˆìŠ¤í† ë¦¬',
    onPressed: () {
      Navigator.push(
        context,
        MaterialPageRoute(builder: (context) => const HistoryScreen()),
      );
    },
  ),
  IconButton(
    icon: const Icon(Icons.calendar_month),
    tooltip: 'ìŠ¤ì¼€ì¤„ ê´€ë¦¬',
    onPressed: () { /* ê¸°ì¡´ ì½”ë“œ */ },
  ),
  IconButton(
    icon: const Icon(Icons.settings),
    tooltip: 'ì„¤ì •',
    onPressed: () { /* ê¸°ì¡´ ì½”ë“œ */ },
  ),
],
```

### 4.6 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| # | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ | ê¸°ëŒ€ ê²°ê³¼ |
|---|--------------|----------|
| 1 | íˆìŠ¤í† ë¦¬ í™”ë©´ ì—´ê¸° (ë¹ˆ ìƒíƒœ) | "ë…¹í™” ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤" í‘œì‹œ |
| 2 | ë…¹í™” ì™„ë£Œ í›„ íˆìŠ¤í† ë¦¬ ìƒˆë¡œê³ ì¹¨ | ìƒˆ ê¸°ë¡ ëª©ë¡ì— ì¶”ê°€ë¨ |
| 3 | ì„±ê³µë¥  ê³„ì‚° (3/4ê±´ ì„±ê³µ) | "75.0%" í‘œì‹œ |
| 4 | íŒŒì¼ ì—´ê¸° ë²„íŠ¼ í´ë¦­ | Explorerì—ì„œ íŒŒì¼ ìœ„ì¹˜ ì—´ë¦¼ |
| 5 | ë“œë¡­ í”„ë ˆì„ ë†’ì€ íŒŒì¼ | ê²½ê³  ìƒíƒœ í‘œì‹œ |

### 4.7 ì˜ˆìƒ ë‚œì´ë„ ë° ì†Œìš” ì‹œê°„

- **ë‚œì´ë„**: â­â­â­â­ (ë†’ìŒ)
- **ìˆœìˆ˜ ì½”ë”©**: 4ì‹œê°„
- **ë©”íƒ€ JSON íŒŒì‹± ë° í…ŒìŠ¤íŠ¸**: 2ì‹œê°„
- **UI ë””ìì¸ ë° ì •ì œ**: 1ì‹œê°„
- **ì´ ì†Œìš” ì‹œê°„**: **5-7ì‹œê°„**

---

## 5. í†µí•© ê³„íš

### 5.1 êµ¬í˜„ ìˆœì„œ (ê¶Œì¥)

```
[Day 1] í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (3-4h)
â”œâ”€â”€ 1. hotkey_manager íŒ¨í‚¤ì§€ ì¶”ê°€ (30min)
â”œâ”€â”€ 2. HotkeyService ì‘ì„± (90min)
â”œâ”€â”€ 3. MainScreen ì—°ë™ (60min)
â””â”€â”€ 4. UI íŒíŠ¸ í‘œì‹œ (60min)

[Day 2] ì˜ˆì•½ í…œí”Œë¦¿ (4-5h)
â”œâ”€â”€ 1. ScheduleTemplate ëª¨ë¸ (60min)
â”œâ”€â”€ 2. TemplateService ì‘ì„± (90min)
â”œâ”€â”€ 3. ë¹ ë¥¸ ì˜ˆì•½ UI (90min)
â””â”€â”€ 4. í…œí”Œë¦¿ ê´€ë¦¬ í™”ë©´ (90min)

[Day 3-4] ë…¹í™” íˆìŠ¤í† ë¦¬ (5-7h)
â”œâ”€â”€ 1. RecordingHistory ëª¨ë¸ (90min)
â”œâ”€â”€ 2. HistoryService ì‘ì„± (120min)
â”œâ”€â”€ 3. HistoryScreen UI (150min)
â””â”€â”€ 4. í†µí•© í…ŒìŠ¤íŠ¸ (60min)
```

### 5.2 pubspec.yaml íŒ¨í‚¤ì§€ ì¶”ê°€

```yaml
dependencies:
  flutter:
    sdk: flutter

  # ê¸°ì¡´ íŒ¨í‚¤ì§€ë“¤...
  window_manager: ^0.4.4
  system_tray: ^2.0.3
  shared_preferences: ^2.3.2
  logger: ^2.4.0
  cron: ^0.5.1
  uuid: ^3.0.7
  path_provider: ^2.1.5

  # ìƒˆë¡œ ì¶”ê°€í•  íŒ¨í‚¤ì§€
  hotkey_manager: ^0.2.3  # í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
```

### 5.3 íŒŒì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì‹ ê·œ ìƒì„± íŒŒì¼ (8ê°œ):**
- [ ] `lib/services/hotkey_service.dart`
- [ ] `lib/services/template_service.dart`
- [ ] `lib/services/history_service.dart`
- [ ] `lib/models/schedule_template.dart`
- [ ] `lib/models/recording_history.dart`
- [ ] `lib/ui/screens/template_manager_screen.dart`
- [ ] `lib/ui/screens/history_screen.dart`
- [ ] `lib/ui/widgets/template_chip.dart`

**ìˆ˜ì • íŒŒì¼ (3ê°œ):**
- [ ] `lib/main.dart` (HotkeyService ì´ˆê¸°í™”)
- [ ] `lib/ui/screens/main_screen.dart` (ë‹¨ì¶•í‚¤ ì—°ë™, í…œí”Œë¦¿, íˆìŠ¤í† ë¦¬ ë²„íŠ¼)
- [ ] `lib/ui/widgets/common/app_button.dart` (shortcutHint ì¶”ê°€)

### 5.4 Git ì»¤ë°‹ ì „ëµ

```bash
# Day 1
git commit -m "feat: í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì‹œìŠ¤í…œ êµ¬í˜„ (Ctrl+R, Ctrl+T, Ctrl+S, Ctrl+,)"

# Day 2
git commit -m "feat: ì˜ˆì•½ í…œí”Œë¦¿ ì‹œìŠ¤í…œ êµ¬í˜„ (ë¹ ë¥¸ ì˜ˆì•½, í…œí”Œë¦¿ ê´€ë¦¬)"

# Day 3-4
git commit -m "feat: ë…¹í™” íˆìŠ¤í† ë¦¬ ëŒ€ì‹œë³´ë“œ êµ¬í˜„ (ì„±ê³µë¥ , íˆìŠ¤í† ë¦¬ ëª©ë¡)"
```

---

## 6. í…ŒìŠ¤íŠ¸ ê³„íš

### 6.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

**HotkeyService í…ŒìŠ¤íŠ¸:**
- [ ] ë‹¨ì¶•í‚¤ ë“±ë¡ ì„±ê³µ
- [ ] ì½œë°± í˜¸ì¶œ í™•ì¸
- [ ] dispose ì‹œ í•´ì œ í™•ì¸

**TemplateService í…ŒìŠ¤íŠ¸:**
- [ ] í…œí”Œë¦¿ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
- [ ] JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”
- [ ] SharedPreferences ì˜ì†ì„±

**HistoryService í…ŒìŠ¤íŠ¸:**
- [ ] ë©”íƒ€ JSON íŒŒì‹±
- [ ] ì„±ê³µë¥  ê³„ì‚°
- [ ] ìƒíƒœ íŒì • (success/warning/failed)

### 6.2 í†µí•© í…ŒìŠ¤íŠ¸

| # | ì‹œë‚˜ë¦¬ì˜¤ | ê¸°ëŒ€ ê²°ê³¼ |
|---|----------|----------|
| 1 | Ctrl+T â†’ 10ì´ˆ ë…¹í™” â†’ íˆìŠ¤í† ë¦¬ í™•ì¸ | íˆìŠ¤í† ë¦¬ì— ê¸°ë¡ ì¶”ê°€ë¨ |
| 2 | í…œí”Œë¦¿ ìƒì„± â†’ ë¹ ë¥¸ ì˜ˆì•½ í´ë¦­ â†’ ì €ì¥ | ì˜ˆì•½ ëª©ë¡ì— ì¶”ê°€ë¨ |
| 3 | ë…¹í™” ì¤‘ Esc â†’ ì¤‘ì§€ í™•ì¸ | ë…¹í™” ì¤‘ì§€ë˜ê³  íŒŒì¼ ì €ì¥ë¨ |
| 4 | íˆìŠ¤í† ë¦¬ì—ì„œ íŒŒì¼ ì—´ê¸° | Explorer ì—´ë¦¼ |

### 6.3 ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

**í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤:**
- [ ] ì•± í¬ì»¤ìŠ¤ ìƒíƒœì—ì„œ Ctrl+T ì‘ë™
- [ ] ì•± ë°±ê·¸ë¼ìš´ë“œì—ì„œ Ctrl+R ì‘ë™
- [ ] ë²„íŠ¼ì— ë‹¨ì¶•í‚¤ íŒíŠ¸ í‘œì‹œë¨

**ì˜ˆì•½ í…œí”Œë¦¿:**
- [ ] í…œí”Œë¦¿ ì¶”ê°€ â†’ ì•± ì¬ì‹œì‘ â†’ ëª©ë¡ ìœ ì§€
- [ ] ë¹ ë¥¸ ì˜ˆì•½ í´ë¦­ â†’ í•„ë“œ ìë™ ì±„ì›Œì§
- [ ] í…œí”Œë¦¿ ì‚­ì œ â†’ ëª©ë¡ì—ì„œ ì œê±°ë¨

**ë…¹í™” íˆìŠ¤í† ë¦¬:**
- [ ] ì„±ê³µë¥  ì •í™•íˆ ê³„ì‚°ë¨
- [ ] ë“œë¡­ í”„ë ˆì„ ë†’ì€ íŒŒì¼ ê²½ê³  í‘œì‹œ
- [ ] íŒŒì¼ ì—†ëŠ” ê²½ìš° ì‹¤íŒ¨ í‘œì‹œ
- [ ] í´ë” ì—´ê¸° ì •ìƒ ì‘ë™

---

## 7. ë¦¬ìŠ¤í¬ ê´€ë¦¬

### 7.1 ê¸°ìˆ  ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ë°œìƒ í™•ë¥  | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|----------|--------|----------|
| hotkey_manager Windows í˜¸í™˜ ë¬¸ì œ | ë‚®ìŒ | ì¤‘ê°„ | ê³µì‹ ë¬¸ì„œ í™•ì¸, ëŒ€ì•ˆìœ¼ë¡œ win32 API ì§ì ‘ ì‚¬ìš© |
| ë©”íƒ€ JSON í˜•ì‹ ë¶ˆì¼ì¹˜ | ì¤‘ê°„ | ë†’ìŒ | try-catchë¡œ ë°©ì–´, íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš© |
| SharedPreferences ìš©ëŸ‰ ì œí•œ | ë‚®ìŒ | ë‚®ìŒ | í…œí”Œë¦¿ ê°œìˆ˜ ì œí•œ (ìµœëŒ€ 20ê°œ) |
| íˆìŠ¤í† ë¦¬ ë¡œë”© ì‹œê°„ ì§€ì—° | ì¤‘ê°„ | ì¤‘ê°„ | ë°±ê·¸ë¼ìš´ë“œ ë¡œë”©, ë¡œë”© ì¸ë””ì¼€ì´í„° í‘œì‹œ |

### 7.2 ì˜ˆìƒ ë¬¸ì œ ë° í•´ê²°

**ë¬¸ì œ 1: ë‹¨ì¶•í‚¤ ì¶©ëŒ**
- Ctrl+Rì´ ë‹¤ë¥¸ ì•±ê³¼ ì¶©ëŒ ê°€ëŠ¥ì„±
- í•´ê²°: ì„¤ì •ì—ì„œ ë‹¨ì¶•í‚¤ ë³€ê²½ ê¸°ëŠ¥ (v2.0)

**ë¬¸ì œ 2: ë©”íƒ€ JSON íŒŒì¼ í˜•ì‹ ë³€ê²½**
- í–¥í›„ ë©”íƒ€ JSON í˜•ì‹ì´ ë³€ê²½ë˜ë©´ íŒŒì‹± ì‹¤íŒ¨
- í•´ê²°: ë²„ì „ í•„ë“œ ì¶”ê°€, ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§

**ë¬¸ì œ 3: í…œí”Œë¦¿ ê°œìˆ˜ ì¦ê°€ ì‹œ UI ë³µì¡ë„**
- í…œí”Œë¦¿ì´ ë„ˆë¬´ ë§ìœ¼ë©´ ë¹ ë¥¸ ì˜ˆì•½ ì„¹ì…˜ì´ ë¹„ëŒ€í•´ì§
- í•´ê²°: ìµœëŒ€ 3ê°œë§Œ í‘œì‹œ, "ë” ë³´ê¸°" ë²„íŠ¼

**ë¬¸ì œ 4: íˆìŠ¤í† ë¦¬ íŒŒì¼ì´ ë§ì„ ë•Œ ì„±ëŠ¥**
- 1000ê°œ ì´ìƒì˜ ë©”íƒ€ íŒŒì¼ íŒŒì‹± ì‹œ ì§€ì—°
- í•´ê²°: í˜ì´ì§€ë„¤ì´ì…˜, ìµœê·¼ 100ê°œë§Œ ë¡œë“œ

### 7.3 ë¡¤ë°± ê³„íš

ê° ê¸°ëŠ¥ì€ ë…ë¦½ì ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ë¡¤ë°±ì´ ìš©ì´í•©ë‹ˆë‹¤:

1. **í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤**: HotkeyServiceë§Œ ì œê±°, ê¸°ì¡´ ê¸°ëŠ¥ ì˜í–¥ ì—†ìŒ
2. **ì˜ˆì•½ í…œí”Œë¦¿**: TemplateService ì œê±°, ê¸°ì¡´ ì˜ˆì•½ ì‹œìŠ¤í…œ ìœ ì§€
3. **ë…¹í™” íˆìŠ¤í† ë¦¬**: HistoryService ì œê±°, íŒŒì¼ íƒìƒ‰ê¸°ë¡œ ì ‘ê·¼ ê°€ëŠ¥

---

## 8. ë‹¤ìŒ ì„¸ì…˜ ì‹œì‘ ê°€ì´ë“œ

### 8.1 ì¤€ë¹„ ì‚¬í•­

**1. ì½”ë“œë² ì´ìŠ¤ ë™ê¸°í™”:**
```bash
cd ~/projects/sat-lec-rec
git pull
syncsat  # WSL â†’ Windows ë™ê¸°í™”
```

**2. íŒ¨í‚¤ì§€ ì„¤ì¹˜:**
```bash
# pubspec.yamlì— hotkey_manager ì¶”ê°€ í›„
flutter pub get
```

**3. ë¹Œë“œ í…ŒìŠ¤íŠ¸:**
```powershell
cd C:\ws-workspace\sat-lec-rec
flutter build windows
```

### 8.2 ì‹œì‘ ìˆœì„œ (ì¶”ì²œ)

**Step 1: í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (Day 1)**
1. `lib/services/hotkey_service.dart` ì‘ì„±
2. `lib/main.dart` ì´ˆê¸°í™” ì¶”ê°€
3. `lib/ui/screens/main_screen.dart` ì—°ë™
4. í…ŒìŠ¤íŠ¸: Ctrl+T, Ctrl+R ì‘ë™ í™•ì¸
5. ì»¤ë°‹ & ë¹Œë“œ

**Step 2: ì˜ˆì•½ í…œí”Œë¦¿ (Day 2)**
1. `lib/models/schedule_template.dart` ì‘ì„±
2. `lib/services/template_service.dart` ì‘ì„±
3. ë©”ì¸ í™”ë©´ "ë¹ ë¥¸ ì˜ˆì•½" ì„¹ì…˜ ì¶”ê°€
4. í…œí”Œë¦¿ ê´€ë¦¬ í™”ë©´ ì‘ì„±
5. í…ŒìŠ¤íŠ¸ & ì»¤ë°‹

**Step 3: ë…¹í™” íˆìŠ¤í† ë¦¬ (Day 3-4)**
1. `lib/models/recording_history.dart` ì‘ì„±
2. `lib/services/history_service.dart` ì‘ì„±
3. `lib/ui/screens/history_screen.dart` ì‘ì„±
4. ë©”ì¸ í™”ë©´ íˆìŠ¤í† ë¦¬ ë²„íŠ¼ ì¶”ê°€
5. í†µí•© í…ŒìŠ¤íŠ¸ & ìµœì¢… ì»¤ë°‹

### 8.3 ê° ë‹¨ê³„ë³„ ì™„ë£Œ ê¸°ì¤€

**í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì™„ë£Œ:**
- [ ] Ctrl+T ëˆŒëŸ¬ì„œ 10ì´ˆ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ë¨
- [ ] Ctrl+R ëˆŒëŸ¬ì„œ ë…¹í™” ì‹œì‘/ì¤‘ì§€ë¨
- [ ] ë²„íŠ¼ì— "Ctrl+T" íŒíŠ¸ í‘œì‹œë¨

**ì˜ˆì•½ í…œí”Œë¦¿ ì™„ë£Œ:**
- [ ] í…œí”Œë¦¿ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
- [ ] ë¹ ë¥¸ ì˜ˆì•½ í´ë¦­ìœ¼ë¡œ í•„ë“œ ì±„ì›Œì§
- [ ] ì•± ì¬ì‹œì‘ í›„ í…œí”Œë¦¿ ìœ ì§€ë¨

**ë…¹í™” íˆìŠ¤í† ë¦¬ ì™„ë£Œ:**
- [ ] íˆìŠ¤í† ë¦¬ í™”ë©´ì— ëª©ë¡ í‘œì‹œë¨
- [ ] ì„±ê³µë¥  ê³„ì‚° ì •í™•í•¨
- [ ] íŒŒì¼ ì—´ê¸° ë²„íŠ¼ ì‘ë™í•¨

---

## 9. ì°¸ê³  ìë£Œ

**ê³µì‹ ë¬¸ì„œ:**
- hotkey_manager: https://pub.dev/packages/hotkey_manager
- SharedPreferences: https://pub.dev/packages/shared_preferences
- Material Design 3: https://m3.material.io

**UX ê°€ì´ë“œë¼ì¸:**
- Nielsen Norman Group - Progress Indicators: https://www.nngroup.com/articles/progress-indicators/
- NN/G - Keyboard Shortcuts: https://www.nngroup.com/articles/ui-copy/

**ì½”ë“œ ì°¸ê³ :**
- Flutter Desktop ì˜ˆì œ: https://github.com/flutter/samples/tree/main/desktop_photo_search
- Hotkey ì‚¬ìš© ì˜ˆì‹œ: https://github.com/leanflutter/hotkey_manager/tree/main/example

---

## 10. ìš”ì•½

### ì´ ì˜ˆìƒ ì†Œìš” ì‹œê°„
- í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤: **3-4ì‹œê°„**
- ì˜ˆì•½ í…œí”Œë¦¿: **4-5ì‹œê°„**
- ë…¹í™” íˆìŠ¤í† ë¦¬: **5-7ì‹œê°„**
- **ì´í•©: 12-16ì‹œê°„ (3-4ì¼)**

### í•µì‹¬ ì´ì 
1. **íš¨ìœ¨ì„± í–¥ìƒ**: ì˜ˆì•½ ì…ë ¥ ì‹œê°„ 80% ë‹¨ì¶•
2. **ì ‘ê·¼ì„± ê°œì„ **: ë§ˆìš°ìŠ¤ ì—†ì´ ì£¼ìš” ê¸°ëŠ¥ ì œì–´
3. **íˆ¬ëª…ì„± í™•ë³´**: ê³¼ê±° ê¸°ë¡ ë° ì„±ê³µë¥  ì¶”ì 

### ìš°ì„ ìˆœìœ„ ìš”ì•½
1. **í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤** (ì‰¬ì›€, ì¦‰ì‹œ íš¨ê³¼)
2. **ì˜ˆì•½ í…œí”Œë¦¿** (ì¤‘ê°„, ë°˜ë³µ ì‘ì—… ê°œì„ )
3. **ë…¹í™” íˆìŠ¤í† ë¦¬** (ì–´ë ¤ì›€, ì¥ê¸° ê°€ì¹˜)

---

**ì´ ê³„íšì„œë¡œ ë‹¤ìŒ ì„¸ì…˜ì„ ì‹œì‘í•˜ì‹œë©´ ë©ë‹ˆë‹¤!** ğŸš€
